---
// index.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import BlogCard from '../components/BlogCard.astro';
import heroVisualizer from '/public/images/hero-visualizer.jpg';

// Get all blog posts and sort by date (newest first)
const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => 
  new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);

// Get featured posts (latest three posts)
const featuredPosts = sortedPosts.slice(0, 3);

const pageTitle = "CipherFlow";
const pageDescription = "CipherFlow is an interactive educational tool that demystifies complex cryptographic algorithms. Learn how modern encryption works through clear, step-by-step visualizations.";
---
<BaseLayout title={pageTitle} description={pageDescription}>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-20">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6">
          Welcome to 
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
            CipherFlow
          </span>
        </h1>
        <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-8 leading-relaxed">
          Visualize the flow of data through complex encryption algorithms. 
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="/blog" 
            class="inline-flex items-center px-8 py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
          >
            Explore Articles
            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
          <a 
            href="/about" 
            class="inline-flex items-center px-8 py-3 rounded-lg border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
          >
            Learn More
          </a>
        </div>
      </div>

          <div class="mt-16 flex justify-center [perspective:800px]">
      <div class="transition-transform duration-500 ease-out hover:[transform:rotateX(5deg)]">
        <img 
          src={heroVisualizer.src} 
          alt="Screenshot of the CipherFlow AES Visualizer in action"
          class="rounded-xl shadow-2xl ring-1 ring-gray-900/10"
        >
      </div>
    </div>

    </div>
  </section>

  <!-- Featured Posts Section -->
  <section class="py-16 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          Featured Articles
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Check out our latest and most popular educational content
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {featuredPosts.map((post) => (
          <BlogCard post={post} />
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/blog" 
          class="inline-flex items-center px-6 py-3 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-semibold hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200"
        >
          View All Articles
          <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-800">
    <div class="container mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          Unlock the World of Cryptography
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Ever wondered how your data stays secure? CipherFlow makes learning cryptography intuitive and engaging. We break down complex encryption algorithms into simple, interactive visualizations, allowing you to see the entire process flow from plaintext to ciphertext.
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Feature 1 -->
        <div class="text-center p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200">
          <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mx-auto mb-4">

          <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>

          </div>
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Step-by-Step Visualization</h3>
          <p class="text-gray-600 dark:text-gray-300">
            Watch algorithms like AES and RSA transform data in real-time. Follow every substitution, permutation, and key mix to truly understand the process, not just the theory.
          </p>
        </div>
        
        <!-- Feature 2 -->
        <div class="text-center p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200">
          <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mx-auto mb-4">

            <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 16v-2m8-8h2M4 12H2m15.364 6.364l1.414 1.414M5.636 5.636l1.414 1.414m12.728 0l-1.414 1.414M6.343 17.657l-1.414 1.414M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>

          </div>
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Interactive Controls</h3>
          <p class="text-gray-600 dark:text-gray-300">
             Input your own custom data and keys. Pause, rewind, and inspect the state at any stage. See instantly how changing a single bit can affect the entire outcome.
          </p>
        </div>
        
        <!-- Feature 3 -->
        <div class="text-center p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200">
          <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center mx-auto mb-4">

          <svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
          </svg>

          </div>
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">In-Depth Explanations</h3>
          <p class="text-gray-600 dark:text-gray-300">
            Each visual step is paired with clear, concise explanations. Understand the "why" behind the math, not just the "how," with insights linked directly to the on-screen action.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="py-16 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
          Go Beyond the Visualizer
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 mb-8">
          Subscribe for in-depth articles, practical case studies, and security insights that build on our interactive tools
        </p>
        
        <form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
          <input
            type="email"
            placeholder="Enter your email"
            class="flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required
          />
          <button
            type="submit"
            class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
          >
            Subscribe
          </button>
        </form>
        
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-4">
          We respect your privacy. Unsubscribe at any time.
        </p>
      </div>
    </div>
  </section>
</BaseLayout>